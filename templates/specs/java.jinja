{# Java spec template #}
{% if package %}
package {{ package }};

{% endif %}
{% if provenance %}
// GENERATED FROM: {{ id }}.yaml
// SPEC HASH: {{ spec_hash }}
// GENERATED: {{ generated_at }}
// DO NOT EDIT - regenerate from spec

{% endif %}
import java.util.*;

public class {{ id_pascal }} {

    public static class Input {
{% for input in inputs %}
        public {{ input.java_type }} {{ input.name_camel }};
{% endfor %}

        public Input({% for input in inputs %}{{ input.java_type }} {{ input.name_camel }}{% if not loop.last %}, {% endif %}{% endfor %}) {
{% for input in inputs %}
            this.{{ input.name_camel }} = {{ input.name_camel }};
{% endfor %}
        }
    }

{% if outputs | length > 1 %}
    public static class Output {
{% for output in outputs %}
        public {{ output.java_type }} {{ output.name_camel }};
{% endfor %}

        public Output({% for output in outputs %}{{ output.java_type }} {{ output.name_camel }}{% if not loop.last %}, {% endif %}{% endfor %}) {
{% for output in outputs %}
            this.{{ output.name_camel }} = {{ output.name_camel }};
{% endfor %}
        }
    }

{% endif %}
    public static {% if outputs | length > 1 %}Output{% else %}{{ outputs[0].java_type }}{% endif %} evaluate(Input input) {
{% for rule in rules %}
{% if loop.first %}
        if ({{ rule.condition_java }}) {
{% else %}
        } else if ({{ rule.condition_java }}) {
{% endif %}
            // {{ rule.id }}
            return {{ rule.output.java }};
{% endfor %}
        } else {
{% if default %}
            return {{ default.java }};
{% else %}
            throw new IllegalStateException("No rule matched");
{% endif %}
        }
    }
}
